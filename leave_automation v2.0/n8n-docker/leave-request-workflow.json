{
  "name": "Leave Request Automation",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "leave-request",
        "responseMode": "lastNode",
        "options": {}
      },
      "id": "a1b2c3d4-e5f6-4a7b-8c9d-0e1f2a3b4c5d",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        300,
        400
      ],
      "webhookId": "leave-request-webhook"
    },
    {
      "parameters": {
        "mode": "runOnceForAllItems",
        "jsCode": "// Get the data from the webhook\nconst webhookBody = $input.first().json.body;\n\n// Prepare payload for Flask\nconst payload = {\n  employee_name: webhookBody.employee_name,\n  department: webhookBody.department,\n  leave_date: webhookBody.leave_date,\n  reason: webhookBody.reason\n};\n\n// Make HTTP request using n8n's built-in helper\ntry {\n  const response = await this.helpers.request({\n    method: 'POST',\n    url: 'http://host.docker.internal:5000/process-leave',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: payload,\n    json: true\n  });\n  \n  // Return Flask's response\n  return [{ json: response }];\n  \n} catch (error) {\n  // Return error details\n  return [{ \n    json: { \n      success: false, \n      error: error.message,\n      details: error.response?.body || 'No response from Flask'\n    }\n  }];\n}"
      },
      "id": "b2c3d4e5-f6a7-4b8c-9d0e-1f2a3b4c5d6e",
      "name": "Call Flask API",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        540,
        400
      ]
    }
  ],
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Call Flask API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2024-12-08T00:00:00.000Z",
  "versionId": "1"
}